const{authorizationSection:e,authorizationBoxWrap:t,authorizationBoxRegisterWrap:n,authorizationLogInForm:o,authorizationLogInEmailInput:a,authorizationLogInPasswordInput:r,authorizationButton:i,authorizationTextPink:d,authorizationRegisterTextPink:s,uniswapMessageTextWrap:c,uniswapMarketBtnCreateStake:l,uniswapMarketExmark:u,uniswapMarketInfoWrap:m,uniswapBackdropHeader:p,uniswapMessageLogout:y,uniswapMessageBtnLogout:g,uniswapMessageBtnNoLogout:k,uniswapBackdropWarning:w,uniswapMessageWarning:E,uniswapMessageBtnWarning:f,uniswapBackdropErrorValidate:B,uniswapMessageErrorValidate:v,uniswapMessageBtnErrorValidate:h,uniswapBackdropErrorCreate:L,uniswapMessageErrorCreate:I,uniswapMessageBtnErrorCreate:S,uniswapBackdropSuccess:b,uniswapMessageSuccess:x,uniswapMessageBtnSuccess:q,linkToMarket:C,linkToStake:_,linkToMyPositions:T,whitePaperMobLink:M,stakeMobLink:P,myPositionsMobLink:$,dashboardLink:F,whitePaperLink:O,roadmapLink:W,faqLink:A,myProfileLink:D,referralProgramLink:z,progressLvlIconFirst:N,hintFirst:R,progressLvlIconSecond:H,hintSecond:j,supportLink:U,logoutLink:V,navUserIcon:G,navUserSections:Y,headerSection:X,footerSection:J,roadmapSection:Q,userProfileSection:K,referralProgramSection:Z,marketSection:ee,TokensListItemWarning:et,TokensListItemMobWarning:en,marketTokensGrid:eo,marketStakeForm:ea,stakeFormSelectPair:er,stakeFormPairWrap:ei,stakeFormPairText:ed,stakeFormAmount:es,stakeFormLockPeriod:ec,stakeFormLockPeriodWrap:el,stakeFormLockPeriodText:eu,marketMyPositions:em,headerMobMenu:ep,mobMenuBackdrop:ey,mobMenu:eg,supportSection:ek,supportBtnArchive:ew,supportBtnNewTicket:eE,archiveList:ef,ticketList:eB,createTicketCloseBtn:ev,createTicketBackdrop:eh,createTicket:eL,ticketSection:eI,ticketItem:eS,ticketArrow:eb,faqSection:ex,faqItems:eq,faqArrows:eC}={authorizationSection:document.querySelector(".authorization"),authorizationBoxWrap:document.querySelector(".authorization-box__wrap"),authorizationBoxRegisterWrap:document.querySelector(".authorization-box__register-wrap"),authorizationLogInForm:document.querySelector(".authorization-box__form"),authorizationLogInEmailInput:document.getElementById("login-email"),authorizationLogInPasswordInput:document.getElementById("login-password"),authorizationButton:document.querySelector(".authorization-box__btn"),authorizationTextPink:document.querySelector(".authorization-box__text_pink"),authorizationRegisterTextPink:document.querySelector(".authorization-box__register-text_pink"),uniswapMessageTextWrap:document.querySelector(".error-auth"),uniswapMarketBtnCreateStake:document.querySelector(".uniswap-market__btn-create-stake"),uniswapMarketExmark:document.querySelector(".uniswap-market__exmark"),uniswapMarketInfoWrap:document.querySelector(".uniswap-market__info-wrap"),uniswapBackdropHeader:document.querySelector(".uniswap-backdrop-header"),uniswapMessageLogout:document.querySelector(".uniswap-message-logout"),uniswapMessageBtnLogout:document.querySelector(".uniswap-message-btn-logout"),uniswapMessageBtnNoLogout:document.querySelector(".uniswap-message-btn-logout-pink"),uniswapBackdropWarning:document.querySelector(".uniswap-backdrop-warning"),uniswapMessageWarning:document.querySelector(".uniswap-message-warning"),uniswapMessageBtnWarning:document.querySelector(".uniswap-message-btn-warning"),uniswapBackdropErrorValidate:document.querySelector(".uniswap-backdrop-error-validate"),uniswapMessageErrorValidate:document.querySelector(".uniswap-message-error-validate"),uniswapMessageBtnErrorValidate:document.querySelector(".uniswap-message-btn-error-validate"),uniswapBackdropErrorCreate:document.querySelector(".uniswap-backdrop-error-create"),uniswapMessageErrorCreate:document.querySelector(".uniswap-message-error-create"),uniswapMessageBtnErrorCreate:document.querySelector(".uniswap-message-btn-error-create"),uniswapBackdropSuccess:document.querySelector(".uniswap-backdrop-success"),uniswapMessageSuccess:document.querySelector(".uniswap-message-success"),uniswapMessageBtnSuccess:document.querySelector(".uniswap-message-btn-success"),linkToMarket:document.querySelector(".link-to-market"),linkToStake:document.querySelector(".link-to-stake"),linkToMyPositions:document.querySelector(".link-to-my-positions"),whitePaperMobLink:document.getElementById("white-paper-mob-link"),stakeMobLink:document.getElementById("stake-mob-link"),myPositionsMobLink:document.getElementById("my-positions-mob-link"),dashboardLink:document.querySelector(".nav__list-dashboard-link"),whitePaperLink:document.querySelector(".nav__list-white-paper-link"),roadmapLink:document.querySelector(".nav__list-roadmap-link"),faqLink:document.querySelector(".nav__list-faq-link"),myProfileLink:document.getElementById("my-profile-link"),referralProgramLink:document.getElementById("referral-program-link"),progressLvlIconFirst:document.querySelector(".progress__lvl-icon-first"),hintFirst:document.querySelector(".hint-first"),progressLvlIconSecond:document.querySelector(".progress__lvl-icon-second"),hintSecond:document.querySelector(".hint-second"),supportLink:document.getElementById("support-link"),logoutLink:document.getElementById("logout-link"),navUserIcon:document.querySelector(".nav__user-icon"),navUserSections:document.querySelector(".nav__user-sections"),headerSection:document.querySelector(".header"),footerSection:document.querySelector(".footer"),roadmapSection:document.querySelector(".roadmap"),userProfileSection:document.querySelector(".user-profile"),referralProgramSection:document.querySelector(".referral-program"),marketSection:document.querySelector(".market"),TokensListItemWarning:document.querySelectorAll(".tokens-list__item-warning"),TokensListItemMobWarning:document.querySelectorAll(".tokens-list__item-mob-warning"),marketTokensGrid:document.querySelector(".market__tokens-grid"),marketStakeForm:document.querySelector(".market__stake-form"),stakeFormSelectPair:document.getElementById("stake-form-select-pair"),stakeFormPairWrap:document.querySelector(".stake-form__pair-wrap"),stakeFormPairText:document.querySelectorAll(".stake-form__pair-text"),stakeFormAmount:document.querySelector(".stake-form__input"),stakeFormLockPeriod:document.getElementById("stake-form-lock-period"),stakeFormLockPeriodWrap:document.querySelector(".stake-form__lock-period-wrap"),stakeFormLockPeriodText:document.querySelectorAll(".stake-form__lock-period-text"),marketMyPositions:document.querySelector(".market__my-positions"),headerMobMenu:document.querySelector(".header__mob-menu"),mobMenuBackdrop:document.querySelector(".mob-menu__backdrop"),mobMenu:document.querySelector(".mob-menu"),supportSection:document.querySelector(".support"),supportBtnArchive:document.querySelector(".support__btn-archive"),supportBtnNewTicket:document.querySelector(".support__btn-new-ticket"),archiveList:document.querySelector(".archive-list"),ticketList:document.querySelector(".ticket-list"),createTicketCloseBtn:document.querySelector(".create-ticket__cross"),createTicketBackdrop:document.querySelector(".create-ticket__backdrop"),createTicket:document.querySelector(".create-ticket"),ticketSection:document.querySelector(".ticket"),ticketItem:document.querySelector(".ticket-list__item"),ticketArrow:document.querySelector(".ticket__arrow"),faqSection:document.querySelector(".faq"),faqItems:document.querySelectorAll(".faq__item"),faqArrows:document.querySelectorAll(".faq__item-arrow")};document.querySelector("a").addEventListener("click",function(e){e.preventDefault()});const e_="visually_hidden",eT="current",eM="link-active";function eP(e,t){e.classList.toggle(e_),t.classList.toggle(e_)}function e$(e){e.classList.toggle("is_hidden")}function eF(e){e.style.display="block"}function eO(e){e.style.display="none"}function eW(e){e.classList.remove(eT)}function eA(e,t){e.classList.toggle(t)}function eD(e){e.classList.add(eM)}function ez(e){e.classList.remove(eM)}function eN(){ez(W),eO(Q),ez(A),eO(ex)}function eR(){eO(K),eO(Z),eO(ek),eO(eI)}function eH(e=eo,t=C){ej(),eD(O),eF(ee),t.classList.add(eT),eF(e)}function ej(){ez(O),eO(ee),eW(C),eO(eo),eW(_),eO(ea),ea.reset(),eW(T),eO(em)}function eU(e,t){e.forEach(e=>{e.addEventListener("click",()=>{t.value=e.innerHTML})})}function eV(){e$(ey),eA(eg,"mob-menu-visible")}G&&G.addEventListener("click",()=>{e$(Y)}),O&&O.addEventListener("click",()=>{eH(),eN(),eR()}),W&&W.addEventListener("click",()=>{eN(),eD(W),eF(Q),ej(),eR()}),A&&A.addEventListener("click",()=>{eN(),eD(A),eF(ex),ej(),eR()}),D&&D.addEventListener("click",()=>{ej(),eN(),eR(),eF(K),e$(Y)}),z&&z.addEventListener("click",()=>{ej(),eN(),eR(),eF(Z),e$(Y)}),C&&C.addEventListener("click",()=>{eH()}),_&&_.addEventListener("click",()=>{eH(ea,_)}),er&&er.addEventListener("click",()=>{e$(ei),eU(ed,er)}),ec&&ec.addEventListener("click",()=>{e$(el),eU(eu,ec)}),T&&T.addEventListener("click",()=>{eH(em,T)}),u&&u.addEventListener("click",()=>{e$(m),setTimeout(()=>{e$(m)},5e3)}),ep&&ep.addEventListener("click",eV),M&&M.addEventListener("click",()=>{eV(),eH(),eN(),eR()}),P&&P.addEventListener("click",()=>{eV(),eH(ea,_),eN(),eR()}),$&&$.addEventListener("click",()=>{eV(),eH(em,T),eN(),eR()});const eG="uniswap-message-warning-visible",eY="uniswap-message-error-validate-visible",eX="uniswap-message-error-create-visible",eJ="uniswap-message-success-visible";function eQ(){return window.getComputedStyle(t).getPropertyValue("padding-top")}function eK(){let e=eQ();if("132px"===e){t.style.paddingTop="100px";return}if("68px"===e){t.style.paddingTop="36px";return}}function eZ(){let e=eQ();if("36px"===e){t.style.paddingTop="68px";return}if("100px"===e){t.style.paddingTop="132px";return}}function e0(e,t,n){e$(e),eA(t,n)}et&&et.forEach(e=>{e.addEventListener("click",()=>{e0(w,E,eG)})}),en&&en.forEach(e=>{e.addEventListener("click",()=>{e0(w,E,eG)})}),f&&f.addEventListener("click",()=>{e0(w,E,eG)}),l&&l.addEventListener("click",()=>""===er.value?void e0(B,v,eY):""===ec.value||""===es.value?void e0(L,I,eX):void e0(b,x,eJ)),h&&h.addEventListener("click",()=>{e0(B,v,eY)}),S&&S.addEventListener("click",()=>{e0(L,I,eX)}),q&&q.addEventListener("click",()=>{e0(b,x,eJ),ea.reset()}),d&&d.addEventListener("click",()=>{eP(t,n),c.style.display="none",o.reset(),eZ()}),s&&s.addEventListener("click",()=>{eP(n,t)}),i&&i.addEventListener("click",()=>{let t=a.value.trim(),n=r.value.trim();if(t&&n)if(t.match(/^[^ ]+@[^ ]+\.[a-z]{2,3}$/))eZ(),o.reset(),c.style.display="none",eO(e),eF(X),eF(J),eH();else{eK(),c.style.display="block";return}else{eK(),c.style.display="block";return}});const e1="uniswap-message-logout-visible";V&&V.addEventListener("click",()=>{e$(Y),e0(p,y,e1)}),g&&g.addEventListener("click",()=>{e0(p,y,e1),ej(),eN(),eR(),eO(X),eO(J),eF(e)}),k&&k.addEventListener("click",()=>{e0(p,y,e1)}),N&&N.addEventListener("click",()=>{e$(R),setTimeout(()=>{e$(R)},5e3)}),H&&H.addEventListener("click",()=>{e$(j),setTimeout(()=>{e$(j)},5e3)});const e2="item-open",e4="arrow-up";function e3(){e$(eh),eA(eL,"create-ticket-visible")}eC&&eC.forEach(e=>{e.addEventListener("click",()=>{let t=e.closest(".faq__item");t&&(eA(e,e4),eA(t,e2)),eq.forEach(e=>{e!==t&&e.classList.contains(e2)&&(e.classList.remove(e2),e.querySelector(".faq__item-arrow").classList.remove(e4))})})}),U&&U.addEventListener("click",()=>{ej(),eN(),eR(),eF(ek),e$(Y)}),eE&&eE.addEventListener("click",e3),ev&&ev.addEventListener("click",e3),eS&&eS.addEventListener("click",()=>{eF(eI),eO(ek)}),eb&&eb.addEventListener("click",()=>{eF(ek),eO(eI)}),ew&&ew.addEventListener("click",()=>{eP(ef,eB)});const e5={ETH:["BNB","ETH","POL","USDT ETH"],TRX:["TRX","USDT TRX"],SOL:["SOL","USDT SOL"],DOGE:["DOGE"]},e6={ETH:2.5,TRX:1,SOL:.5,DOGE:.25};let e8=null,e9=null,e7=0,te="";function tt(e){let t=e.split(" ")[0].toLowerCase();return`/static/images/coins/small/${t}.png`}function tn(e){return`/static/images/coins/small/${({ETH:"eth",TRX:"trx",SOL:"sol",DOGE:"doge"})[e]||"generic"}.png`}function to(e){let t=document.getElementById(`${e}Select`),n=document.getElementById(`${e}Dropdown`),o=t.querySelector(".select-arrow");if("coin"===e&&!e8)return;let a=n.classList.contains("open");tr(),a||(n.classList.add("open"),t.classList.add("active"),o.classList.add("open"))}function ta(e){let t=document.getElementById(`${e}Select`),n=document.getElementById(`${e}Dropdown`),o=t.querySelector(".select-arrow");n.classList.remove("open"),t.classList.remove("active"),o.classList.remove("open")}function tr(){["network","coin"].forEach(e=>ta(e))}function ti(){let e=document.getElementById("withdrawAmount"),t=document.getElementById("networkFee"),n=document.getElementById("totalDeduction"),o=e8?e6[e8]:0,a=e7+o;e.textContent=`$${e7.toFixed(2)}`,t.textContent=`~$${o.toFixed(2)}`,n.textContent=`$${a.toFixed(2)}`}function td(e){return e&&e.length>=20&&e.length<=100}function ts(){let e=document.getElementById("submitBtn"),t=document.getElementById("amountInput"),n=document.getElementById("addressInput");e7=parseFloat(t.value)||0,te=n.value.trim();let o=e8?e6[e8]:0,a=e7+o;e8&&e9&&td(te)&&e7>=10&&a<=0?(e.classList.add("active"),e.disabled=!1):(e.classList.remove("active"),e.disabled=!0),ti()}document.getElementById("amountInput").addEventListener("input",e=>{e7=parseFloat(e.target.value)||0;let t=document.getElementById("amountError"),n=e8?e6[e8]:0,o=e7+n;e7>0&&o>0?(t.textContent=`Insufficient balance (need $${o.toFixed(2)} including fees)`,t.classList.add("show")):e7>0&&e7<10?(t.textContent="Minimum withdrawal is $10",t.classList.add("show")):t.classList.remove("show"),ts()}),document.getElementById("addressInput").addEventListener("input",e=>{te=e.target.value.trim();let t=document.getElementById("addressError");te&&!td(te)?t.classList.add("show"):t.classList.remove("show"),ts()}),document.getElementById("networkSelect").addEventListener("click",()=>to("network")),document.getElementById("coinSelect").addEventListener("click",()=>to("coin")),document.addEventListener("click",e=>{e.target.closest(".select-wrapper")||tr()}),document.getElementById("withdrawForm").addEventListener("submit",async e=>{if(e.preventDefault(),!e8||!e9||!td(te)||e7<10)return;let t=document.getElementById("submitBtn");t.classList.add("loading"),t.textContent="Creating Request...",t.disabled=!0;try{let e=await fetch("/api/withdraw/create",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({network:e8,coin:e9,amount:e7,address:te})});if(e.ok){let t=await e.json();window.location.href=`/withdraw/request/${t.withdraw_data.transaction_id}`}else{let n=await e.json();alert(`Error: ${n.detail||"Failed to create withdrawal request"}`),t.classList.remove("loading"),t.textContent="Create Withdrawal Request",ts()}}catch(e){alert("Connection error. Please try again."),t.classList.remove("loading"),t.textContent="Create Withdrawal Request",ts()}}),window.addEventListener("load",()=>{let e=document.getElementById("networkDropdown");Object.keys(e5).forEach(t=>{let n=document.createElement("div");n.className="dropdown-option",n.dataset.value=t,n.innerHTML=`
            <img src="${tn(t)}"
                alt="${t}"
                class="network-icon"
                onerror="if (!this.src.includes('generic.png')) this.src='/static/images/coins/small/generic.png';">
            <span>${t}</span>
        `,n.addEventListener("click",()=>(function(e){e8=e,e9=null,document.getElementById("networkSelect").querySelector(".select-display").innerHTML=`
        <img src="${tn(e)}"
            alt="${e}"
            class="network-icon"
            onerror="if (!this.src.includes('generic.png')) this.src='/static/images/coins/small/generic.png';">
        <span>${e}</span>
    `,ta("network");let t=document.getElementById("coinSelect");t.classList.remove("disabled"),function(e){let t=document.getElementById("coinDropdown");t.innerHTML="",e5[e].forEach(e=>{let n=document.createElement("div");n.className="dropdown-option",n.dataset.value=e,n.innerHTML=`
            <img src="${tt(e)}"
                alt="${e}"
                class="coin-icon"
                onerror="if (!this.src.includes('generic.png')) this.src='/static/images/coins/small/generic.png';">
            <span>${e}</span>
        `,n.addEventListener("click",()=>(function(e){e9=e,document.getElementById("coinSelect").querySelector(".select-display").innerHTML=`
        <img src="${tt(e)}"
            alt="${e}"
            class="coin-icon"
            onerror="if (!this.src.includes('generic.png')) this.src='/static/images/coins/small/generic.png';">
        <span>${e}</span>
    `,ta("coin");let t=document.getElementById("addressInput");t.classList.remove("disabled"),t.disabled=!1,ts()})(e)),t.appendChild(n)})}(e),t.querySelector(".select-display").innerHTML='<span class="select-placeholder">Select Coin</span>',ti(),ts()})(t)),e.appendChild(n)})});const tc=window.location.pathname.split("/"),tl=tc[tc.length-1];let tu=null,tm=null;async function tp(){try{let e=await fetch(`/api/withdraw/request/${tl}`,{credentials:"include"});e.ok?(tu=await e.json(),function(){if(!tu)return;if(document.getElementById("withdrawAmount").textContent=`${tu.withdraw_data.amount.toFixed(2)}`,document.getElementById("networkName").textContent=tu.withdraw_data.network||"N/A",document.getElementById("destinationAddress").textContent=tu.withdraw_data.address,document.getElementById("transactionId").textContent=tl,tu.withdraw_data.created_at){let e=new Date(tu.withdraw_data.created_at);document.getElementById("createdTime").textContent=e.toLocaleString()}let e=document.getElementById("statusText"),t=document.getElementById("statusDot"),n=document.getElementById("approveBtn"),o=document.getElementById("cancelBtn"),a=document.getElementById("messageBox");t.className="status-dot",e.className="status-text";let r=["step1","step2","step3","step4"];switch(r.forEach(e=>document.getElementById(e).className="timeline-item"),tu.withdraw_data.status){case"withdraw_request_created":e.textContent="Pending Approval",e.classList.add("pending"),t.classList.add("pending"),document.getElementById("step1").classList.add("completed"),document.getElementById("step2").classList.add("active"),document.getElementById("step1Time").textContent="Completed",document.getElementById("step2Time").textContent="Current";break;case"withdraw_approved_by_user":e.textContent="Waiting for system",e.classList.add("pending"),t.classList.add("pending"),document.getElementById("step1").classList.add("completed"),document.getElementById("step2").classList.add("active"),document.getElementById("step1Time").textContent="Completed",document.getElementById("step2Time").textContent="Current",n.disabled=!0;break;case"withdraw_request_processing":e.textContent="Processing",e.classList.add("processing"),t.classList.add("processing"),document.getElementById("step1").classList.add("completed"),document.getElementById("step2").classList.add("completed"),document.getElementById("step3").classList.add("active"),document.getElementById("step1Time").textContent="Completed",document.getElementById("step2Time").textContent="Completed",document.getElementById("step3Time").textContent="Current",n.disabled=!0,o.disabled=!0,n.textContent="Processing...",a.innerHTML=`
                <div class="warning-box">
                    <div class="warning-title">\u{23F3} Processing Withdrawal</div>
                    <div class="warning-content">
                        Your withdrawal is being processed. This typically takes 15-60 minutes depending on network congestion.
                    </div>
                </div>`;break;case"withdraw_completed":e.textContent="Completed",e.classList.add("completed"),t.classList.add("completed"),r.forEach(e=>{document.getElementById(e).classList.add("completed"),document.getElementById(e+"Time").textContent="Completed"}),n.disabled=!0,o.disabled=!0,n.textContent="Completed",a.innerHTML=`
                <div class="success-box">
                    <div class="success-title">\u{2705} Withdrawal Complete</div>
                    <div class="success-content">
                        Your withdrawal has been successfully processed and sent to the specified address.
                    </div>
                </div>`;break;case"withdraw_request_declined_by_user":e.textContent="Cancelled",e.classList.add("cancelled"),t.classList.add("cancelled"),n.disabled=!0,o.disabled=!0,a.innerHTML=`
                <div class="warning-box">
                    <div class="warning-title">Request Cancelled</div>
                    <div class="warning-content">
                        This withdrawal request has been cancelled. Your funds have been returned to your available balance.
                    </div>
                </div>`}}()):alert("Failed to load withdrawal request")}catch(e){console.error("Error loading withdrawal data:",e),alert("Failed to load withdrawal request")}}function ty(){document.getElementById("modalOverlay").style.display="none",tm=null}function tg(e,t,n=null){let o=document.getElementById("modalOverlay");document.getElementById("modalTitle").textContent=e,document.getElementById("modalText").textContent=t,document.getElementById("modalActions").style.display="none",document.getElementById("modalOkOnly").style.display="flex",o.style.display="flex";let a=document.getElementById("modalOkBtn"),r=a.cloneNode(!0);a.parentNode.replaceChild(r,a),r.addEventListener("click",()=>{ty(),n&&n()})}async function tk(){let e=document.getElementById("approveBtn");e.disabled=!0,e.textContent="Approving...";try{let t=await fetch(`/api/withdraw/approve_by_user/${tl}`,{method:"POST",credentials:"include"});if(ty(),t.ok)tg("Success","Withdrawal approved! Waiting till system gonna process it."),tp();else{let n=await t.json();tg("Error",`Error: ${n.detail}`),e.disabled=!1,e.textContent="Confirm Withdrawal"}}catch(t){ty(),tg("Error","Failed to approve withdrawal. Please try again."),e.disabled=!1,e.textContent="Confirm Withdrawal"}}async function tw(){let e=document.getElementById("cancelBtn");e.disabled=!0,e.textContent="Cancelling...";try{let t=await fetch(`/api/withdraw/decline_by_user/${tl}`,{method:"POST",credentials:"include"});if(ty(),t.ok)tg("Success","Withdrawal cancelled. Funds returned to your balance.",()=>{window.location.href="/dashboard"});else{let n=await t.json();tg("Error",`Error: ${n.detail}`),e.disabled=!1,e.textContent="Cancel Request"}}catch(t){ty(),tg("Error","Failed to cancel withdrawal. Please try again."),e.disabled=!1,e.textContent="Cancel Request"}}document.getElementById("modalCancelBtn").addEventListener("click",ty),document.getElementById("modalOverlay").addEventListener("click",e=>{"modalOverlay"===e.target.id&&ty()}),document.getElementById("modalConfirmBtn").addEventListener("click",async()=>{"confirm"===tm?await tk():"cancel"===tm&&await tw()}),document.querySelectorAll(".profile-menu-item").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t=this.dataset.target;t&&(window.location.href=t)})}),document.addEventListener("click",function(e){let t=document.querySelector(".profile-btn"),n=document.getElementById("profileDropdown");t.contains(e.target)||n.contains(e.target)||n.classList.remove("active")});const tE=window.location.pathname.split("/"),tf=tE[tE.length-1];let tB=null,tv=null,th=null;async function tL(){try{let e=await fetch(`/api/deposit/request/${tf}`,{credentials:"include"});if(e.ok){if(tB=await e.json(),function(){if(!tB)return;document.getElementById("depositAmount").textContent=`$${tB.amount.toFixed(2)}`,document.getElementById("stepAmount").textContent=`$${tB.amount.toFixed(2)}`,document.getElementById("networkName").textContent=tB.network,document.getElementById("depositAddress").textContent=tB.address,document.getElementById("warningNetwork").textContent=tB.network,document.getElementById("transactionId").textContent=tf;let e=document.getElementById("qrImage"),t=document.getElementById("qrPlaceholder");e.src=`/static/qr_codes/${tB.address}.png`,e.onload=function(){e.style.display="block",t.style.display="none"},e.onerror=function(){e.style.display="none",t.style.display="block",t.textContent="QR Code not available"};let n=document.getElementById("statusText"),o=document.querySelector(".status-dot");switch(tB.status){case"deposit_request_created":n.textContent="Waiting for Deposit",o.style.background="#f59e0b";break;case"deposit_approved_by_user":n.textContent="Processing",o.style.background="#38bdf8",document.getElementById("confirmBtn").disabled=!0,document.getElementById("confirmBtn").textContent="Processing...",document.getElementById("cancelBtn").disabled=!0,tv&&clearInterval(tv),document.getElementById("expiryTimer").textContent="Waiting for confirmation";break;case"deposit_completed":n.textContent="Completed",o.style.background="#10b981",document.getElementById("confirmBtn").disabled=!0,document.getElementById("confirmBtn").textContent="Completed",document.getElementById("cancelBtn").disabled=!0,tv&&clearInterval(tv),document.getElementById("expiryTimer").textContent="Completed";break;case"deposit_request_declined_by_user":n.textContent="Cancelled by user",o.style.background="#ef4444",document.getElementById("confirmBtn").disabled=!0,document.getElementById("cancelBtn").disabled=!0,tv&&clearInterval(tv),document.getElementById("expiryTimer").textContent="Cancelled by user";break;case"deposit_declined_by_system":n.textContent="Declined by system",o.style.background="#ef4444",document.getElementById("confirmBtn").disabled=!0,document.getElementById("cancelBtn").disabled=!0,tv&&clearInterval(tv),document.getElementById("expiryTimer").textContent="Declined by system";break;case"deposit_request_expired":n.textContent="Expired",o.style.background="#ef4444",document.getElementById("confirmBtn").disabled=!0,document.getElementById("cancelBtn").disabled=!0,tv&&clearInterval(tv),document.getElementById("expiryTimer").textContent="Expired"}}(),!th&&tB.created_at){let e=new Date(tB.created_at);th=new Date(e.getTime()+18e5),tv=setInterval(()=>{let e=new Date,t=Math.max(0,th-e);if(t<=0){clearInterval(tv),document.getElementById("expiryTimer").textContent="Expired",document.getElementById("confirmBtn").disabled=!0,document.getElementById("statusText").textContent="Expired",document.querySelector(".status-dot").style.background="#ef4444",tI();return}let n=Math.floor(t/6e4),o=Math.floor(t%6e4/1e3);document.getElementById("expiryTimer").textContent=`Expires in ${n}:${o.toString().padStart(2,"0")}`},1e3)}}else alert("Failed to load deposit request"),window.location.href="/dashboard"}catch(e){console.error("Error loading deposit data:",e),alert("Failed to load deposit request"),window.location.href="/dashboard"}}async function tI(){try{await fetch(`/api/deposit/expired/${tf}`,{method:"POST",credentials:"include"})}catch(e){console.error("Failed to auto-decline:",e)}}function tS(e){let t=document.getElementById("modalOverlay"),n=document.getElementById("modalTitle"),o=document.getElementById("modalText");document.getElementById("modalActions").style.display="flex",document.getElementById("modalOkOnly").style.display="none",currentAction=e,"confirm"===e?(n.textContent="Confirm Deposit",o.textContent="Please confirm that you have sent the deposit. This action cannot be undone."):"cancel"===e&&(n.textContent="Cancel Deposit Request",o.textContent="Are you sure you want to cancel this deposit request?"),t.style.display="flex"}function tb(){document.getElementById("modalOverlay").style.display="none",currentAction=null}function tx(e,t,n=null){let o=document.getElementById("modalOverlay");document.getElementById("modalTitle").textContent=e,document.getElementById("modalText").textContent=t,document.getElementById("modalActions").style.display="none",document.getElementById("modalOkOnly").style.display="flex",o.style.display="flex";let a=document.getElementById("modalOkBtn"),r=a.cloneNode(!0);a.parentNode.replaceChild(r,a),r.addEventListener("click",()=>{tb(),n&&n()})}async function tq(){let e=document.getElementById("confirmBtn");e.disabled=!0,e.textContent="Confirming...";try{let e=await fetch(`/api/deposit/approve/${tf}`,{method:"POST",credentials:"include"});if(e.ok)tb(),tx("Deposit Confirmed","Your deposit has been confirmed. Your balance will update once verified on the blockchain.",()=>tL());else{let t=await e.json();tb(),tx("Error",`Error: ${t.detail}`)}}catch(e){tb(),tx("Network Error","Failed to confirm deposit. Please try again.")}finally{e.disabled=!1,e.textContent="I've Sent the Deposit"}}async function tC(){let e=document.getElementById("cancelBtn");e.disabled=!0,e.textContent="Cancelling...";try{let e=await fetch(`/api/deposit/decline/${tf}`,{method:"POST",credentials:"include"});if(e.ok)tb(),tx("Deposit Cancelled","Your deposit request has been cancelled",()=>tL());else{let t=await e.json();tb(),tx("Error",`Error: ${t.detail}`)}}catch(e){tb(),tx("Network Error","Failed to cancel deposit. Please try again.")}finally{e.disabled=!1,e.textContent="Cancel Request"}}document.getElementById("modalCancelBtn").addEventListener("click",tb),document.getElementById("modalOverlay").addEventListener("click",e=>{"modalOverlay"===e.target.id&&tb()}),document.getElementById("modalConfirmBtn").addEventListener("click",async()=>{"confirm"===currentAction?await tq():"cancel"===currentAction&&await tC()}),document.getElementById("confirmBtn").onclick=()=>tS("confirm"),document.getElementById("cancelBtn").onclick=()=>tS("cancel"),window.addEventListener("load",()=>{}),window.addEventListener("beforeunload",()=>{tv&&clearInterval(tv)});
//# sourceMappingURL=uniswap-cw.bf39b921.js.map
